---
title: 06.JavaScript深浅拷贝
date: 2020-11-14 15:35:35
permalink: /pages/JavaScript深浅拷贝
author: kcy
---

# JavaScript深浅拷贝
* 对象类型在赋值的过程中其实是复制了地址，从而会导致改变了一方其他也都被改变的情况
```javascript
    let a = {
        age: 1
    }
    let b = a
    a.age = 2
    console.log(b.age) // 2
```
## 浅拷贝
* Object.assign :  拷贝所有的属性值到新的对象中，如果属性值是对象的话，拷贝的是地址，所以并不是深拷贝
```javascript
    let a = {
        age: 1
    }
    let b = Object.assign({}, a)
    a.age = 2
    console.log(b.age) // 1
```
* 通过展开运算符 ... 来实现浅拷贝
```javascript
    let a = {
        age: 1
    }
    let b = {...a}
    a.age = 2
    console.log(b.age) // 1
```
## 深拷贝
* JSON.parse(JSON.stringify(object))
    * 会忽略 undefined
    * 会忽略 symbol
    * 不能序列化函数
    * 不能解决循环引用的对象,会报错
```javascript
    let a = {
    age: 1,
        jobs: {
            first: 'FE'
        }
    }
    let b = JSON.parse(JSON.stringify(a))
    a.jobs.first = 'native'
    console.log(b.jobs.first) // FE

    let a = {
        age: undefined,
        sex: Symbol('male'),
        jobs: function() {},
        name: 'yck'
    }
    let b = JSON.parse(JSON.stringify(a))
    console.log(b) // {name: "yck"}
```

